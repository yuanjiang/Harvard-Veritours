if(!window.ucs){window.ucs={};window.ucs._sendBeacon=function(c,b){var a=new Image();a.height=0;a.width=0;a.src="https://geo.yahoo.com/t"+c;document.body.appendChild(a);};window.ucs.YObj=(function(){var a=document.getElementById("yucs");return(typeof window.Y!=="undefined"&&(a&&a.getAttribute("data-property")==="srp"))?window.Y:YUI();})();}YUI.add("ucs-menu-utils",function(a){a.namespace("ucs");if(a.ucs.MenuUtils){return;}var c="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",j="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",k='<span class="separator" role="presentation"></span>',h="click",i="a",p="role",l="tabIndex",b="yucs-hide",e="iframe",m="ul",n="li",f="parentNode",o="http://l.yimg.com/a/lib/ush/icon.gif",g="https://s.yimg.com/lq/lib/ush/icon.gif",d=300;a.ucs.MenuUtils=function(r,q){var s=q&&q.panelSelector||m;this.menu=r;this.panel=this.menu.one(s);if(this.panel){this.init();}this.openDelay=(q&&typeof q.openDelay!="undefined")?(q.openDelay):(d);this.closeTimer=null;this.overPanel=false;this.overLink=false;};a.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.on("hover",a.bind(this._handleMenuEnter,this),a.bind(this._handleMouseOut,this),this);this.panel.on("hover",a.bind(this._handlePanelEnter,this),a.bind(this._handlePanelLeave,this),this);this.menu.delegate(h,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(i).set(p,"button");this.panel.all(i).set(p,"menuitemradio");this.panel.set(p,"menu");this.panel.all("div,ul,li").set(p,"presentation");if(!a.UA.ipad&&!a.UA.mobile){this.panel.set(l,-1);}this.focusmanager=this.panel.plug(a.Plugin.NodeFocusManager,{descendants:i,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"yucs-has-focus",fn:function(q){return q.get(f);}},circular:true});},_destructAria:function(){this.panel.unplug(a.Plugin.NodeFocusManager);this.panel.one(i).set(l,0);},_handleMenuClick:function(q){if(this.overLink&&this.panel.hasClass(b)){this._accessShowMenu(q);if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}}},_handleMenuEnter:function(q){q.halt();this.overLink=true;a.later(this.openDelay,this,this._handleMenuClick);},_handlePanelEnter:function(q){if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}this.overPanel=true;},_handlePanelLeave:function(q){this.overPanel=false;if(this.panelShown){this._handleMouseOut();}},_handleKeyup:function(q){if(27===q.keyCode){this.menu.one(i).focus();this._hideMenu();}else{if(40===q.keyCode&&!this.keyedup){this.panel.one(i).focus();this.keyedup=true;}}},_handleKeydown:function(q){if(!this.panel.hasClass(b)){q.stopPropagation();}if(40===q.keyCode){q.preventDefault();}},_handleDocumentClick:function(q){if(this.panel.contains(q.target)||q.target._node===this.panel._node||this.panel.hasClass(b)||q.target===this.menu.one(">a")||q.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(r){var q=this;this._hideAllMenus();this._showMenu(r);this.panel.focus();a.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=a.on("blur",function(t){var s=this;if(!this.skipBlur){this.timeout=setTimeout(function(){s._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=a.on("focus",function(s){if(this.timeout&&this.panel.hasChildNodes(s.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);},_showMenu:function(r){this.panel.removeClass(b);this._addIframeShim();var q=this.menu.one(e);if(q){q.removeClass(b);}},_position:function(){var q=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",q[0]);}this.panel.setStyle("top",q[1]+13);},_handleMouseOut:function(q){this.overLink=false;if(this.closeTimer){this.closeTimer.cancel();this.closeTimer=null;}if(!this.panel.hasClass(b)){this.closeTimer=a.later(500,this,this._handleLeave);}},_handleLeave:function(q){if(!this.overPanel&&!this.overLink){this._hideMenu();}},_hideMenu:function(){this.panel.addClass(b);this.overPanel=false;var q=this.menu.one(e);if(q){q.addClass(b);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var s=a.all("yucs-menu iframe"),t=a.all(".yucs-notifications ul.ynotif-yahoo-panel"),r=a.one("#yucs-top-menu"),q=a.all(".yucs-notifications div.yucs-notif-panel");this._hideMenu();if(r&&r.one("ul")){r.one("ul").addClass(b);a.one("#yucs-more").removeClass("yucs-menu-active");}s.addClass(b);t.addClass(b);q.addClass(b);},_addIframeShim:function(){var q=a.all("select"),s=(a.UA.ie<=6),r;if(!s||(q.size()===0)){return;}r=this.menu.one(e);if(!r){r=document.createElement(e);r=this.panel.get(f).insertBefore(r,this.panel);}r.className="yucs-shim";r.setStyle("position","absolute");r.setStyle("width",this.panel.getComputedStyle("width"));r.setStyle("height",this.panel.getComputedStyle("height"));r.setStyle("top",this.panel.getY()+"px");r.setStyle("border","0px none");if(!this.menu.hasClass("yucs-help")){r.setStyle("left",0);}r.frameBorder=0;},_addMenuGroups:function(t,y,x){var v=this.menu.one(m),q="",r=(v.get("children")._nodes.length)?true:false;for(var s=0,u=t.length;s<u;s++){var w=t[s].length;if(y==="bottom"){t[s][0].separatorTop=true;}else{if(s<(u-1)||r){t[s][w-1].separatorBottom=true;}}q+=this._addMenuGroup(t[s],x);}if(y==="bottom"){v.append(q);}else{v.prepend(q);}},_addMenuGroup:function(r,t){var u="";for(var s=0,q=r.length;s<q;s++){if(t){r[s].isDebugItem=true;r[s].menuClass="debug-item";}else{r[s].isDebugItem=false;r[s].menuClass="minty-item";}u+=this._addMenuItem(r[s]);}return u;},_addMenuItem:function(r){var q="";
if(r.isActive){r.checkedAria='aria-checked="true"';}else{r.checkedAria="";}if(r.isDisabled){r.disabledAria='aria-disabled="true"';}else{r.disabledAria="";}switch(r.actionType){case"link":q=a.substitute(c,r,this._processTemplateValue);break;case"customEvent":q=a.substitute(j,r,this._processTemplateValue);break;default:break;}if(q){if(r.isDebugItem){q=q.replace(/separator/,"separator debug-item");}else{q=q.replace(/separator/,"separator minty-item");}}return q;},_clearMenuItem:function(q){this.menu.one(m).all("."+q).each(function(r){r.remove(true);});},_processTemplateValue:function(r,s,t){a.log("key = "+r+" value = "+s+" meta_data = "+t);var u="";var q=(document.location.protocol==="https:")?g:o;switch(r){case"icon":if(s!==undefined){if(s==="available"){u='<img src="'+q+'" class="yucs-opi available"/>';}else{if(s==="offline"){u='<img src="'+q+'" class="yucs-opi offline"/>';}else{if(s==="invisible"){u='<img src="'+q+'" class="yucs-opi invisible"/>';}else{if(s==="busy"){u='<img src="'+q+'" class="yucs-opi busy"/>';}else{if(s==="idle"){u='<img src="'+q+'" class="yucs-opi idle"/>';}else{u='<img src="'+s+'" />';}}}}}}break;case"separatorTop":if(s){u=k;}break;case"separatorBottom":if(s){u=k;}break;case"actionData":if(s){u='data-mad="'+s+'"';}break;case"isDisabled":if(s){u="disabled";}break;case"isActive":if(s){u="sp active";}break;case"checkedAria":u=s;break;default:u=s;break;}return u;},_resetItemStatus:function(t){var s=t.ancestor(m).all(n),r=t.ancestor(m).all("li.disabled"),q;s.removeClass("sp active");r.removeClass("disabled");if(t.getAttribute("data-dis")){q=t.ancestor(n);q.addClass("disabled");}if(t.getAttribute("data-hs")){q=t.ancestor(n);q.addClass("sp active");}},_handleMenuItemClick:function(r){var q=r.target;}};},"1.0",{requires:["node","event","event-hover","event-custom","substitute","node-focusmanager"]});(function(){var b=document.getElementById("yucs"),a=typeof window.Y!=="undefined"&&(b&&b.getAttribute("data-property")==="srp")?window.Y:YUI();if(!b){return;}a.use("node","ucs-menu-utils",function(d){var c=d.one("#yucs").all("li.yucs-menu.yucs-activate");c.each(function(f){var e=new d.ucs.MenuUtils(f);});});})();YUI.add("ucs-simple-menu",function(f){f.namespace("ucs.MoreMenu");var d="yucs-menu-active",e="role",a="tabIndex",b=">li>a",c="parentNode";f.ucs.MoreMenu=function(g){f.ucs.MoreMenu.superclass.constructor.call(this,g);g.removeClass("yucs-more-activate");this.ylt=g.getAttribute("data-ylt");this.topBar=f.one("#yucs-top-bar");this._init();};f.extend(f.ucs.MoreMenu,f.ucs.MenuUtils,{_init:function(){this._position();this._initAriaTopbar();this._initEvents();},_initEvents:function(){this.menu.detach("hover");this.panel.detach("hover");f.one("#yucs-more-link").on("click",this._handleMenuClick,this);f.Global.on("ucs:menuNavShow",this._hideMenu,this);},_handleMenuClick:function(g){g.halt();if(this.panel.hasClass("yucs-hide")){this._showMenu(g);this.menu.removeClass("yucs-has-focus");this.menu.one("a").blur();this.documentClickHandle=f.one("body").on("click",this._handleDocumentClick,this);this.documentMouseDownHandle=f.one("body").on("mousedown",this._handleDocumentClick,this);}else{this._hideMenu();}},_position:function(){var g=this.menu.get("region").height;g=g-2;f.one("#yucs-top-menu").setStyle("top",g+"px");},_sendBeacon:function(){window.ucs._sendBeacon(this.ylt);},_showMenu:function(g){if(this.panel.hasClass("yucs-hide")){this._sendBeacon();this.menu.addClass(d);f.ucs.MoreMenu.superclass._showMenu.apply(this,arguments);}},_hideMenu:function(g){f.ucs.MoreMenu.superclass._hideMenu.apply(this,arguments);this.menu.removeClass(d);},_handleKeyup:function(g){if(27===g.keyCode||9===g.keyCode){this.menu.one("a").focus();this._hideMenu();}else{if(40===g.keyCode&&!this.keyedup){if(this.panel.one("a")){this._handleMenuClick(g);this.panel.one("a").focus();}this.keyedup=true;}}},_initAriaTopbar:function(){if(!this.topBar){return;}this.toolbar=f.one("#yucs-top-list");this.toolbar.set(e,"toolbar");this.toolbar.all(">li").set(e,"presentation");this.toolbar.delegate("mouseenter",function(g){g.currentTarget.removeClass("yucs-has-focus");},">li");this.fm=this.toolbar.plug(f.Plugin.NodeFocusManager,{descendants:b,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",className:"yucs-has-focus",fn:function(g){return g.get(c);}},circular:true});this.panel.focusManager.get("descendants").after("keydown",function(g){if(9===g.keyCode){this.panel.focusManager.focus(0);this._hideMenu();}},this);this.toolbar.focusManager.get("descendants").after("keyup",function(g){if(9===g.keyCode){this.toolbar.focusManager.focus(0);}if(27===g.keyCode){this.menu.one("a").focus();this._hideMenu();}},this);}});},"1.0",{requires:["node","event","ucs-menu-utils","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate"]});(function(){ucs.YObj.use("node","ucs-simple-menu",function(b){var c=b.one("#yucs-more.yucs-more-activate"),a;if(c){a=new b.ucs.MoreMenu(c);}});})();